var app=angular.module("alcalculatorApp.controllers",[]);app.controller("baseController",["$scope","$rootScope",function($scope,$rootScope){var defaultPage="page1";$rootScope.page1={},$rootScope.calculations={},$rootScope.loadingMessage="Loading...",$rootScope.templates=[],$rootScope.templates.page1={name:"page1.html",url:"//www.eris.com.au/calculators/alcalc/templates/page1.html"},$rootScope.templates.page2={name:"page2.html",url:"//www.eris.com.au/calculators/alcalc/templates/page2.html"},$rootScope.templates.inserttax={name:"inserttax.html",url:"//www.eris.com.au/calculators/alcalc/templates/insert_tax.html"},$rootScope.templates.results={name:"results.html",url:"//www.eris.com.au/calculators/alcalc/templates/results.html"},$rootScope.templates.loading={name:"loading.html",url:"//www.eris.com.au/assets/templates/loading.html"},$scope.template=$rootScope.templates[defaultPage],$rootScope.pageLoad=function(page){$scope.template=$rootScope.templates[page]}}]),app.controller("loadingController",["$scope",function($scope){$scope.loadingMessage=$rootScope.loadingMessage}]),app.controller("alpage1Controller",["$scope","$rootScope","$timeout",function($scope,$rootScope,$timeout){$scope.hideform=!1,$scope.showloading=!1,$scope.al={},$scope.pageHeader="Annual Leave Calculator",$scope.loadMessage="Loading...",$scope.submitForm=function(){$scope.showloading=!0,$rootScope.page1=$scope.al,$timeout(function(){$timeout(function(){$rootScope.pageLoad("page2"),$scope.showloading=!1},300)},1e3)}}]),app.controller("alpage2Controller",["$scope","$rootScope","alcalculatorAPIservice","$timeout",function($scope,$rootScope,alcalculatorAPIservice,$timeout){$scope.al={},$scope.pageHeader="Annual Leave Calculator",$scope.al.contactperson="Payroll Dept",$scope.al.hourwork=38,$scope.al.annual_leave_loading="0",$scope.showloading=!1,$scope.loadMessage="Loading...",$scope.calcType=$rootScope.page1.noncorptype.charAt(0).toUpperCase()+$rootScope.page1.noncorptype.substr(1).toLowerCase()+" calculation";var d=new Date;$scope.currentYear=d.getFullYear(),$scope.endYear=$scope.currentYear+4,$scope.add_range=function(type){angular.isUndefined($scope.al[type+"dates"])&&($scope.al[type+"dates"]="");var from=$scope.al[type+"fromdd"]+"-"+$scope.al[type+"frommm"]+"-"+$scope.al[type+"fromyyyy"],to=$scope.al[type+"todd"]+"-"+$scope.al[type+"tomm"]+"-"+$scope.al[type+"toyyyy"];$scope.al[type+"dates"]+=from+"->"+to+"\n"},$scope.submitForm=function(){var data=$scope.al;data.noncorptype=$rootScope.page1.noncorptype,$scope.showloading=!0,"redundancy"==data.noncorptype?$scope.loadMessage="Calculating...":$scope.loadMessage="Loading...",alcalculatorAPIservice.doCalculations(data).then(function(response){$rootScope.calculations=response.data,"redundancy"==data.noncorptype?$timeout(function(){$timeout(function(){$rootScope.pageLoad("results")},300)},1e3):$timeout(function(){$timeout(function(){$rootScope.pageLoad("inserttax")},300)},1e3)})},$scope.startOver=function(){$rootScope.pageLoad("loading"),$timeout(function(){$timeout(function(){$rootScope.pageLoad("page1")},300)},1e3)},$scope.clearField=function(flds){if(angular.isDefined(flds[1])){var fld0=flds[0],fld1=flds[1];""!=$scope.al[fld0]&&($scope.al[fld1]="")}else{var fld=flds[0];$scope.al[fld]=""}}}]),app.controller("alpage3Controller",["$scope","$rootScope","alcalculatorAPIservice","$timeout",function($scope,$rootScope,alcalculatorAPIservice,$timeout){$scope.al={},$scope.pageHeader="Insert Tax";var data=$rootScope.calculations;$scope.calc=$rootScope.calculations,$scope.submitForm=function(){data.tax1=$scope.al.tax1,data.tax2=$scope.al.tax2,data.saveData=1,$rootScope.loadingMessage="Calculating...",$rootScope.pageLoad("loading"),alcalculatorAPIservice.doCalculations(data).then(function(response){$rootScope.calculations=response.data,$timeout(function(){$timeout(function(){$rootScope.pageLoad("results")},300)},1e3)})}}]),app.controller("alresultsController",["$scope","$rootScope",function($scope,$rootScope){$scope.al={},$scope.pageHeader="Annual Leave Calculation",$scope.calc=$rootScope.calculations}]),app.filter("range",function(){return function(input,min,max){min=parseInt(min),max=parseInt(max);for(var i=min;i<=max;i++)input.push(i);return input}}),app.run(function($rootScope){$rootScope.typeOf=function(value){return typeof value}}).directive("stringToNumber",function(){return{require:"ngModel",link:function(scope,element,attrs,ngModel){ngModel.$parsers.push(function(value){return""+value}),ngModel.$formatters.push(function(value){return parseFloat(value)})}}}).directive("userMessage",function(){return{scope:{obj:"="},template:'<div class="user-message">{{ obj.userMessage }}</div>'}});