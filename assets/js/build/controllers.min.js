var app=angular.module("erisApp.controllers",["ngRoute","ngSanitize"]);app.controller("indexController",["$scope","$rootScope","$timeout","erisAPIservice","$location",function($scope,$rootScope,$timeout,erisAPIservice,$location){$scope.detail={},$scope.detail.sitename="Employment Relations Information System",$scope.doLogin=function(){erisAPIservice.doLogin($scope.username,$scope.password).then(function(response){return $scope.success=response.data.success,0==response.data.success?void($scope.loginMessage="Login error. Please try again"):($scope.loginMessage="Success! Redirecting..",void $timeout(function(){$timeout(function(){$location.path("/eris")},300)},1e3))})}}]),app.controller("loadingController",["$scope",function($scope){$scope.loadingMessage=$rootScope.loadingMessage}]),app.controller("erisController",["$scope","erisAPIservice",function($scope,erisAPIservice){$scope.sitetitle="Employment Relations Information System",erisAPIservice.getSiteContent().then(function(response){$scope.sitemenu=response.data.menu,$scope.pageContent=response.data.content})}]),app.run(function($rootScope){$rootScope.typeOf=function(value){return typeof value}}).directive("stringToNumber",function(){return{require:"ngModel",link:function(scope,element,attrs,ngModel){ngModel.$parsers.push(function(value){return""+value}),ngModel.$formatters.push(function(value){return parseFloat(value)})}}}).directive("userMessage",function(){return{scope:{obj:"="},template:'<div class="user-message">{{ obj.userMessage }}</div>'}}),app.config(function($routeProvider){$routeProvider.when("/",{templateUrl:"assets/templates/index/index.html",controller:"indexController"}).when("/eris",{templateUrl:"assets/templates/eris.html",controller:"erisController"})});