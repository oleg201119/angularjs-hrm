function checkDate(id){return!($("#"+id+"fromyyyy").val()>$("#"+id+"toyyyy").val())&&($("#"+id+"fromyyyy").val()<$("#"+id+"toyyyy").val()||!($("#"+id+"frommm").val()>$("#"+id+"tomm").val())&&($("#"+id+"frommm").val()<$("#"+id+"tomm").val()||!($("#"+id+"fromdd").val()>$("#"+id+"todd").val())&&$("#"+id+"fromdd").val()<$("#"+id+"todd").val()))}function saveHTML(receipt){$.ajax({method:"POST",url:"calculators/lslcalculator/calculations.php",data:{action:"saveHTML",html:$(".step3").html(),receipt:receipt},dataType:"json",success:function(data){},fail:function(data){},complete:function(data){}})}function setDates(){$('#startDatedd option[value="'+startD+'"]').attr("selected","selected"),$('#startDatemm option[value="'+startM+'"]').attr("selected","selected"),$('#startDateyyyy option[value="'+startY+'"]').attr("selected","selected"),$('#finishDatedd option[value="'+endD+'"]').attr("selected","selected"),$('#finishDatemm option[value="'+endM+'"]').attr("selected","selected"),$('#finishDateyyyy option[value="'+endY+'"]').attr("selected","selected")}var receipt=0;updateDescriptions=function(){$('[id*="_description"] div').hide(),$('[id*="_description"] .'+$("#state option:selected").val()).show(),$('[id*="_description"] div div').hide(),$('[id*="_description"] div .'+$("#awardType option:selected").val()).show()},$("#wages").blur(function(){0!=$(this).val()&&0!=$(this).val()&&$("#commission").val("0")}),$("#commission").blur(function(){0!=$(this).val()&&0!=$(this).val()&&$("#wages").val("0")}),$("#state").change(function(){var id=$(this).val();$("#awardType option").hide(),$("#awardType option."+id).show();var val=$("#awardType option:visible:first").val();$("#awardType").val(val),updateDescriptions()}),$("#awardType").change(function(){updateDescriptions()}),$("#clear1, #clear2, #clear3").click(function(){$("input, select, textarea").val(""),$("#tax_category").val("tax_freeno_ll"),$("#awardType").val("federal"),setDates(),$("#commission").val(""),$("select").each(function(index,value){var id=$(this).attr("id"),val=$("#"+id+" option").first().val();"state"==id&&(val="NSW"),$(this).val(val)}),updateDescriptions(),"clear2"==$(this).attr("id")&&($(".step2").fadeOut(300),$(".step1").fadeIn(1500)),"clear3"==$(this).attr("id")&&($(".step3").fadeOut(300),$(".step1").fadeIn(1500))}),$(".add-date").click(function(){var idArr=$(this).attr("id"),idSplit=idArr.split("-"),id=idSplit[0],dateOK=checkDate(id);if(!dateOK)return alert("To date must be greater than From date"),!1;var date1=$("#"+id+"fromdd").val()+"/"+$("#"+id+"frommm").val()+"/"+$("#"+id+"fromyyyy").val(),date2=$("#"+id+"todd").val()+"/"+$("#"+id+"tomm").val()+"/"+$("#"+id+"toyyyy").val(),range=date1+"->"+date2,outputId="#"+id+"dates",data=$(outputId).val();data=""==data?range:data+"\n"+range,$(outputId).val(data)}),$(".clear-date").click(function(){var idArr=$(this).attr("id"),idSplit=idArr.split("-"),id=idSplit[0],outputId="#"+id+"dates";$(outputId).val("")}),$(document).ready(function(){setDates();var id=$("#state").val();$("#awardType option").hide(),$("#awardType option."+id).show(),$("#awardType option:visible:first").attr("selected",!0),updateDescriptions()}),$(".step1 input, .step1 textarea").keyup(function(){$(this).removeClass("has-error")}),$(".step1 select").change(function(){$(this).removeClass("has-error")}),$("#step1proceed").click(function(e){var error=!1;$(".step1 input, .step1 select, .step1 textarea").each(function(i,val){var value,req=$(this).attr("required");void 0!==req&&"undefined"!=typeof req&&(value=$(this).val(),""===$.trim(value)&&(error=!0,$(this).addClass("has-error")))}),error||(e.preventDefault(),$(".step1").fadeOut(600),$(".step2").fadeIn(1500),window.scrollTo(0,0))}),$("#step2proceed").click(function(){var data={};$(".step1 input, .step1 select, .step1 textarea, .step2 input, .step2 select").each(function(i,val){var id=$(this).attr("id");data[id]=$(this).val()}),$.ajax({method:"POST",url:"calculators/lslcalculator/calculations.php",data:data,dataType:"json",success:function(data){$(".step2").fadeOut(300),$(".step3").fadeIn(1500),$("#start_date_display").html(data.start_date_display),$("#finish_date_display").html(data.finish_date_display),$("#total_accrued").html(data.total_accrued),$("#lodgedBy-summary").html(data.firstname+" "+data.lastname),$("#employeeName-summary").html(data.employeeName),$("#company-summary").html(data.companyName),$("#occupation-summary").html(data.occupation),$("#weeklyWage-summary").html(data.weeklyWage),$("#awardType-summary").html(data.awardType),$("#state-summary").html(data.state),$("#reason-summary").html(data.reason),$("#displaydate-summary").html(data.displaydate),$("#lsl_taken").html(data.lsl_taken),$("#lsl_balance").html(data.lsl_balance),$("#gross_payable").html(data.gross),$("#nett").html(data.netPayable),$("#tax").html(data.totalTax),$("#receipt").html(data.receipt),$("#p1_months").html(data.details.p1.months),$("#p1_accrued").html(data.details.p1.accrued),$("#p1_taken").html(data.details.p1.taken),$("#p1_remain").html(data.details.p1.remain),$("#p1_value").html(data.details.p1.value),$("#p1_tax").html(data.details.p1.tax),$("#p2_months").html(data.details.p2.months),$("#p2_accrued").html(data.details.p2.accrued),$("#p2_taken").html(data.details.p2.taken),$("#p2_remain").html(data.details.p2.remain),$("#p2_value").html(data.details.p2.value),$("#p2_tax").html(data.details.p2.tax),$("#p3_months").html(data.details.p3.months),$("#p3_accrued").html(data.details.p3.accrued),$("#p3_taken").html(data.details.p3.taken),$("#p3_remain").html(data.details.p3.remain),$("#p3_value").html(data.details.p3.value),$("#p3_tax").html(data.details.p3.tax),$("#totalMoneyPeriods").html(data.details.totalMoneyPeriods),$("#total_tax").html(data.details.grandtotaltax),$(".lsl-results-message").html("<a href='"+data.filename+"' target='_blank'>Click here to download a copy of these results</a>"),saveHTML(data.receipt),receipt=data.receipt},fail:function(data){},complete:function(data){}})});